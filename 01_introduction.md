# Next.js란?

**리액트 전용 웹 개발 프레임워크**로, 리액트를 보다 더 강력하고 편하게 사용할 수 있는 기능들을 제공한다.

### 라이브러리 vs 프레임워크

- **라이브러리**
  주도권을 개발자가 가진다. 기능 구현을 원하는 방향으로 진행하고, 쓰고 싶은 도구와 쓰고 싶은 기술을 골라서 사용할 수 있다.
  자유도가 높은 대신, 기본 기능 외에는 제공하지 않는다는 특징을 가진다.
  - React.js, JQuery
- **프레임워크**
  주도권을 프레임워크가 가진다. 프레임워크가 제공하는 기능을 이용하거나 허용하는 범위 내에서만 추가 도구를 사용할 수 있다.
  자유도가 낮은 대신, 거의 모든 기능을 제공한다는 특징을 가진다.

## CSR의 동작 원리와 단점

브라우저의 요청에 사전에 렌더링이 완료된 HTML을 응답하는 렌더링 방식으로, CSR의 단점을 해결하는 기술이다.

- **CSR(Client Side Rendering) -** React.js 앱의 기본적인 렌더링 방식. 클라이언트(브라우저)에서 직접 화면을 렌더링한다.
  유저가 서버에 접속하면, 서버는 우선 index.html(빈 껍데기) 파일을 반환하므로 빈 화면을 렌더링하게 된다. 그 다음 작성된 코드를 번들링하여 JS를 실행한 뒤 브라우저에 다시 컨텐츠를 띄운다.
  번들링된 JS 파일에는 해당 서비스에서 접근이 가능한 모든 컴포넌트 코드가 존재하기 때문에, 초기 접속 이후의 페이지 이동이 매우 빠르고 쾌적하다는 장점을 가진다.
  다만 초기 접속 시점이 느리다는 단점이 있다.
  - **FCP(First Contentful Paint)** - 요청 시작 시점으로부터 컨텐츠가 화면에 처음 나타나는 데 걸리는 시간. 웹페이지의 성능을 대표하는 중요한 지표. 요청 시작 ↔ 컨텐츠 렌더링
    - 3sec ≥ : 이탈률 32% 증가
    - 5sec ≥ : 이탈률 90% 증가
    - 6sec ≥ : 이탈률 106% 증가
    - 10sec ≥ : 이탈률 123% 증가

## Next.js의 사전 렌더링 - 빠른 FCP 달성 + 빠른 페이지 이동

사전 렌더링의 경우 유저가 서버에 접속하면, 서버가 JS를 실행하여 렌더링(모든 코드를 HTML로 변환)한다. 렌더링된 HTML 파일을 그대로 브라우저에 보내 주고, 화면에 렌더링한다. FCP를 단축할 수 있게 되는 것이다. 다만 HTML 파일로는 웹페이지의 상호작용이 불가능하기 때문에, HTML 파일을 렌더링한 이후 JS 번들링 과정을 거치고, HTML과 연결한다. (이 과정을 Hydration - 수화라고도 한다. HTML 파일에 JS라는 물을 뿌린다는 의미)

- **TTI(Time to Interactive)**: 웹페이지의 상호작용이 가능해짐을 의미하는 성능 지표

페이지 이동 요청은 CSR 방식으로 처리하여 CSR의 장점 중 하나인 빠른 페이지 이동성을 그대로 가져간다. 브라우저가 서버에게 별도의 페이지를 요청하지 않고, 브라우저 측에서 JS를 실행한 뒤 컴포넌트를 교체하고, 페이지를 교체한다.
